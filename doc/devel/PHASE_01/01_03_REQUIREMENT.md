# 要件定義書 - vsmatrix PHASE 1

## 目的

本文書では、vsmatrix PHASE1 MVP(Minimum Viable Product) の開発に必要な要件を定義します。
次のPHASEへのたたき台となるとともに、最低限の実動作が実現できるかを確認します。
最低限の動作とは、サイン波がマイクから入力されているように見える仮想インターフェース(VAIF)を作ることです。

## 概要
### 機能概要

PHASE1はコマンドではなく、仮想AIFのデバイスドライバとして実現します。
入力VAIFを1個作り、44.1kHZのサンプリングレート、16bit/ch、2chに440Hzのsin波を出力することを指します。

### ペルソナと特性

ユーザーは開発者(lulliecat)1人とします。今後の開発の足掛かりとしてのみ使います。

### 動作環境

Windows11 Pro x64環境で動作します。

### 前提条件

デバイスドライバの署名はテストのものを使います。

### 制約条件

未検討です。

## 機能要件

### FR-01: ドライバ初期化機能
- 優先度: 必須
- 説明: ドライバを初期化し、仮想デバイスの作成に備えます。
- 詳細:
  - register, PnP, power management回りの最低限のコード

### FR-02: 仮想デバイス作成機能
- 優先度: 必須
- 説明: VAIF1_INPUTという名前の仮想入力AIFを作成します。
- 詳細:
  - デバイスの新規作成

### FR-03: SIN波出力機能
- 優先度: 必須
- 説明: VAIF1_INPUTから、sin波を出力します。
- 詳細:
  - リアルタイムでは生成せず、読み出しリクエストがあった際にリクエスト分だけSIN波を生成します。
  - SIN波は以下のスペックです
    - 量子化bit数: 16bit
    - サンプリング周波数: 44,100Hz
    - チャンネル数: 2ch
    - SIN波周波数: 440Hz
    - SIN波振幅: 16bit p-p

## 非機能要件

## UI要件

## 受け入れ基準

- OBS StudioのINPUTソースとして指定し、トーンが両チャンネルからモニタリングできることを確認します。
